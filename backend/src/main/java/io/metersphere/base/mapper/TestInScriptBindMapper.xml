<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="io.metersphere.base.mapper.TestInScriptBindMapper">
    <resultMap type="io.metersphere.testin.domain.TestInScriptBind" id="TestInScriptBindMap">
        <result property="id" column="id" jdbcType="VARCHAR"/>
        <result property="msCaseId" column="ms_case_id" jdbcType="VARCHAR"/>
        <result property="testInScriptNo" column="test_in_script_no" jdbcType="INTEGER"/>
        <result property="testInScriptName" column="test_in_script_name" jdbcType="VARCHAR"/>
        <result property="coverInstall" column="cover_install" jdbcType="INTEGER"/>
        <result property="cleanData" column="clean_data" jdbcType="INTEGER"/>
        <result property="keepApp" column="keep_app" jdbcType="INTEGER"/>
        <result property="createTime" column="create_time" jdbcType="INTEGER"/>
        <result property="creator" column="creator" jdbcType="VARCHAR"/>
        <result property="updateTime" column="update_time" jdbcType="INTEGER"/>
        <result property="updateUser" column="update_user" jdbcType="VARCHAR"/>
        <result property="delFlag" column="del_flag" jdbcType="INTEGER"/>
        <result property="delTime" column="del_time" jdbcType="INTEGER"/>
    </resultMap>

    <insert id="insert">
        insert into test_in_script_bind(id,ms_case_id, test_in_script_no, test_in_script_name,
                                        cover_install, clean_data, keep_app,
                                        create_time, creator, update_time, update_user, del_flag, del_time)
        values (#{id}, #{msCaseId}, #{testInScriptNo}, #{testInScriptName},
                #{coverInstall}, #{cleanData}, #{keepApp},
                #{createTime}, #{creator}, #{updateTime}, #{updateUser}, #{delFlag}, #{delTime})

    </insert>
    <delete id="delete">
        update test_in_script_bind set del_flag = 1, del_time = NOW(), update_user = #{updateUser}
            where id = #{id}
    </delete>
    <select id="findByMsCaseId" resultMap="TestInScriptBindMap">
        select id, ms_case_id, test_in_script_no, test_in_script_name,
               cover_install, clean_data, keep_app,
               create_time, creator, update_time, update_user, del_flag, del_time
        from test_in_script_bind where ms_case_id = #{msCaseId} and del_flag = 0
        limit 1
    </select>
    <select id="findByScriptNo" resultType="io.metersphere.testin.domain.TestInScriptBind">
        select id, ms_case_id, test_in_script_no, test_in_script_name,
               create_time, creator, update_time, update_user, del_flag, del_time
        from test_in_script_bind
        where test_in_script_no = #{scriptNo} and del_flag = 0
        limit 1
    </select>

</mapper>
